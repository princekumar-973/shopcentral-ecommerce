{% extends 'base.html' %}

{% block title %}My Orders â€” MyShop{% endblock %}

{% block content %}
<div class="cart-wrapper">
  <h2>ðŸ“¦ My Orders</h2>

  {% if orders %}
    {% for order in orders %}
    <div style="background:var(--bg-3); border:1px solid var(--border); border-radius:var(--radius); padding:1.5rem; margin-bottom:1rem;">

      <!-- Order Header -->
      <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:1rem; margin-bottom:1rem; padding-bottom:1rem; border-bottom:1px solid var(--border);">
        <div>
          <span style="font-family:'Syne',sans-serif; font-size:0.68rem; color:var(--muted); letter-spacing:0.1em; text-transform:uppercase;">Order</span>
          <span style="font-family:'Cormorant Garamond',serif; font-size:1.3rem; font-weight:700; color:var(--gold); margin-left:0.4rem;">#{{ order.id }}</span>
        </div>
        <div style="display:flex; gap:1rem; align-items:center; flex-wrap:wrap;">
          <span style="font-family:'Syne',sans-serif; font-size:0.78rem; color:var(--muted);">{{ order.created_at|date:"d M Y" }}</span>
          <span style="
            font-family:'Syne',sans-serif;
            font-size:0.72rem;
            font-weight:700;
            padding:0.3rem 0.85rem;
            border-radius:999px;
            letter-spacing:0.06em;
            text-transform:uppercase;
            {% if order.status == 'delivered' %}background:rgba(85,239,196,0.1); color:#55efc4; border:1px solid rgba(85,239,196,0.3);
            {% elif order.status == 'cancelled' %}background:rgba(255,118,117,0.1); color:#ff7675; border:1px solid rgba(255,118,117,0.3);
            {% elif order.status == 'shipped' %}background:rgba(201,168,76,0.1); color:var(--gold); border:1px solid var(--border-hover);
            {% else %}background:var(--bg-card); color:var(--muted-light); border:1px solid var(--border);
            {% endif %}
          ">{{ order.get_status_display }}</span>
        </div>
      </div>

      <!-- Order Items -->
      {% for item in order.items.all %}
      <div style="display:flex; align-items:center; justify-content:space-between; padding:0.6rem 0; border-bottom:1px solid var(--border); font-family:'Syne',sans-serif;">
        <div style="display:flex; align-items:center; gap:0.75rem;">
          {% if item.product.image %}
            <img src="{{ item.product.image.url }}" style="width:45px; height:45px; object-fit:cover; border-radius:6px; border:1px solid var(--border);">
          {% endif %}
          <div>
            <div style="font-size:0.88rem; color:var(--white); font-weight:500;">{{ item.product.name }}</div>
            <div style="font-size:0.72rem; color:var(--muted);">Qty: {{ item.quantity }}</div>
          </div>
        </div>
        <span style="font-family:'Cormorant Garamond',serif; font-size:1rem; font-weight:700; color:var(--gold);">â‚¹{{ item.get_total }}</span>
      </div>
      {% endfor %}

      <!-- Order Footer -->
      <div style="display:flex; justify-content:space-between; align-items:center; margin-top:1rem; flex-wrap:wrap; gap:0.5rem;">
        <span style="font-family:'Syne',sans-serif; font-size:0.78rem; color:var(--muted);">
          Payment: {{ order.get_payment_method_display }}
        </span>
        <span style="font-family:'Cormorant Garamond',serif; font-size:1.3rem; font-weight:700; color:var(--white);">
          Total: â‚¹{{ order.total_amount }}
        </span>
      </div>

    </div>
    {% endfor %}

  {% else %}
  <div class="empty-cart">
    <div class="icon">ðŸ“¦</div>
    <p>You haven't placed any orders yet!</p>
    <a href="{% url 'store:product_list' %}" class="btn btn-primary">Start Shopping â†’</a>
  </div>
  {% endif %}

</div>
{% endblock %}